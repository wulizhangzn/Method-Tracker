<idea-plugin>
    <id>com.znzhang.method-tracker</id>
    <name>Method Tracker</name>
    <vendor>znzhang</vendor>
    <description>
        <![CDATA[
            <b>Method Tracker</b>
            <p>
                A lightweight, non-intrusive performance profiling tool for Java developers.
                This plugin identifies latency bottlenecks in your code by recording precise
                method execution times and visualizing them through interactive flame graphs.
            </p>

            <b>Key Features:</b>
            <ul>
                <li><b>ByteBuddy Powered:</b> Utilizes advanced bytecode manipulation to inject tracing logic without modifying your original source code.</li>
                <li><b>Interactive Flame Graphs:</b> High-performance visualization powered by <b>D3.js</b>. Support for zooming, searching, and drill-down analysis of call stacks.</li>
                <li><b>Spring Boot Ready:</b> Seamlessly integrates with Spring Boot applications and standard Java projects.</li>
            </ul>
            <b>How it Works:</b>
            <ol>
                <li>Open the <b>Method Tracker</b> tool window.</li>
                <li>Right-click a method in the editor to <b>Add to Method Tracker</b>.</li>
                <li>Run your Java/Spring Boot application as usual.</li>
                <li>The plugin injects a Java Agent to trace method entry and exit.</li>
            </ol>
        ]]>
    </description>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.java</depends>
    <extensions defaultExtensionNs="com.intellij">
        <toolWindow id="Method Tracker"
                    anchor="bottom"
                    canCloseContents="true"
                    factoryClass="com.znzhang.methodtracker.MyToolWindowFactory"
                    icon="com.znzhang.methodtracker.FlameGraphIcons.ToolWindow"/>
        <notificationGroup id="MySpaceMonitorGroup" displayType="BALLOON"/>
        <java.programPatcher implementation="com.znzhang.methodtracker.extension.AgentPatcher"/>
        <projectConfigurable
                instance="com.znzhang.methodtracker.setting.FlameGraphConfigurable"
                id="com.znzhang.methodtracker.settings"
                displayName="Method Tracker"
                nonDefaultProject="true"/>
    </extensions>
    <projectListeners>
        <listener topic="com.intellij.execution.ExecutionListener"
                  class="com.znzhang.methodtracker.listener.RunExecutionListener"/>
    </projectListeners>

    <actions>
        <action id="com.znzhang.methodtracker.AddMonitor" class="com.znzhang.methodtracker.action.AddMonitorAction"
                text="Add to Method Tracker">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
        </action>
    </actions>
</idea-plugin>